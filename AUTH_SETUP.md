# рџ”ђ РЎРёСЃС‚РµРјР° Р°СѓС‚РµРЅС‚РёС„РёРєР°С†РёРё

## вњ… Р§С‚Рѕ Р±С‹Р»Рѕ СЃРѕР·РґР°РЅРѕ

### 1. РљРѕРјРїРѕРЅРµРЅС‚С‹ Р°СѓС‚РµРЅС‚РёС„РёРєР°С†РёРё
- **`components/auth/AuthModal.tsx`** - РјРѕРґР°Р»СЊРЅРѕРµ РѕРєРЅРѕ РІС…РѕРґР°/СЂРµРіРёСЃС‚СЂР°С†РёРё
- **`components/auth/UserButton.tsx`** - РєРЅРѕРїРєР° РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ СЃ РІС‹РїР°РґР°СЋС‰РёРј РјРµРЅСЋ
- **`components/PageHeader.tsx`** - С…РµРґРµСЂ СЃС‚СЂР°РЅРёС†С‹ СЃ РєРЅРѕРїРєРѕР№ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ

### 2. РљРѕРЅС‚РµРєСЃС‚ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
- **`contexts/AuthContext.tsx`** - СѓРїСЂР°РІР»РµРЅРёРµ СЃРѕСЃС‚РѕСЏРЅРёРµРј Р°СѓС‚РµРЅС‚РёС„РёРєР°С†РёРё
- РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРѕРµ РѕС‚СЃР»РµР¶РёРІР°РЅРёРµ СЃРµСЃСЃРёРё
- Р“Р»РѕР±Р°Р»СЊРЅС‹Р№ РґРѕСЃС‚СѓРї Рє РґР°РЅРЅС‹Рј РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ

### 3. РЎС‚СЂР°РЅРёС†Р° Р»РёС‡РЅРѕРіРѕ РєР°Р±РёРЅРµС‚Р°
- **`app/dashboard/page.tsx`** - Р»РёС‡РЅС‹Р№ РєР°Р±РёРЅРµС‚ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
- РЎРїРёСЃРѕРє РїСЂРѕРµРєС‚РѕРІ
- РЎС‚Р°С‚РёСЃС‚РёРєР°
- РЈРїСЂР°РІР»РµРЅРёРµ РїСЂРѕРµРєС‚Р°РјРё

### 4. РРЅС‚РµРіСЂР°С†РёСЏ
- **`app/layout.tsx`** - РѕР±РµСЂРЅСѓС‚ РІ `AuthProvider`
- Р“РѕС‚РѕРІРѕ Рє РёСЃРїРѕР»СЊР·РѕРІР°РЅРёСЋ РІРѕ РІСЃРµРј РїСЂРёР»РѕР¶РµРЅРёРё

## рџљЂ РљР°Рє РёСЃРїРѕР»СЊР·РѕРІР°С‚СЊ

### Р’Р°СЂРёР°РЅС‚ 1: РСЃРїРѕР»СЊР·РѕРІР°С‚СЊ РіРѕС‚РѕРІС‹Р№ РєРѕРјРїРѕРЅРµРЅС‚ PageHeader

Р’ `app/page.tsx` Р·Р°РјРµРЅРёС‚Рµ СЃСѓС‰РµСЃС‚РІСѓСЋС‰РёР№ С…РµРґРµСЂ РЅР°:

```tsx
import PageHeader from '@/components/PageHeader';

// Р’ РєРѕРјРїРѕРЅРµРЅС‚Рµ:
<PageHeader
  status={status}
  aiModel={aiModel}
  onModelChange={(model) => {
    setAiModel(model);
    // РѕР±РЅРѕРІРёС‚СЊ URL РїР°СЂР°РјРµС‚СЂС‹
  }}
  availableModels={appConfig.ai.availableModels}
  modelDisplayNames={appConfig.ai.modelDisplayNames}
  onCreateSandbox={createSandbox}
  onReapply={reapplyLastGeneration}
  onDownloadZip={downloadZip}
  canReapply={!!conversationContext.lastGeneratedCode && !!sandboxData}
  hasSandbox={!!sandboxData}
/>
```

### Р’Р°СЂРёР°РЅС‚ 2: Р”РѕР±Р°РІРёС‚СЊ С‚РѕР»СЊРєРѕ РєРЅРѕРїРєСѓ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ

РџСЂРѕСЃС‚Рѕ РґРѕР±Р°РІСЊС‚Рµ РІ РЅСѓР¶РЅРѕРµ РјРµСЃС‚Рѕ:

```tsx
import UserButton from '@/components/auth/UserButton';

// Р’ JSX:
<UserButton />
```

## рџ“± Р¤СѓРЅРєС†РёРѕРЅР°Р»

### Р”Р»СЏ РЅРµР°РІС‚РѕСЂРёР·РѕРІР°РЅРЅС‹С… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№:
- РљРЅРѕРїРєР° "Р’РѕР№С‚Рё"
- РњРѕРґР°Р»СЊРЅРѕРµ РѕРєРЅРѕ СЃ С„РѕСЂРјР°РјРё РІС…РѕРґР°/СЂРµРіРёСЃС‚СЂР°С†РёРё
- РџРµСЂРµРєР»СЋС‡РµРЅРёРµ РјРµР¶РґСѓ РІС…РѕРґРѕРј Рё СЂРµРіРёСЃС‚СЂР°С†РёРµР№
- Р’Р°Р»РёРґР°С†РёСЏ email Рё РїР°СЂРѕР»СЏ

### Р”Р»СЏ Р°РІС‚РѕСЂРёР·РѕРІР°РЅРЅС‹С… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№:
- РђРІР°С‚Р°СЂ СЃ РїРµСЂРІРѕР№ Р±СѓРєРІРѕР№ email
- Р’С‹РїР°РґР°СЋС‰РµРµ РјРµРЅСЋ СЃ:
  - Email РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
  - РЎСЃС‹Р»РєР° РЅР° Р»РёС‡РЅС‹Р№ РєР°Р±РёРЅРµС‚
  - РљРЅРѕРїРєР° РІС‹С…РѕРґР°

## рџЏ  Р›РёС‡РЅС‹Р№ РєР°Р±РёРЅРµС‚

Р”РѕСЃС‚СѓРїРµРЅ РїРѕ Р°РґСЂРµСЃСѓ: `/dashboard`

**Р¤СѓРЅРєС†РёРё:**
- РџСЂРѕСЃРјРѕС‚СЂ РІСЃРµС… РїСЂРѕРµРєС‚РѕРІ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
- РЎС‚Р°С‚РёСЃС‚РёРєР° (РІСЃРµРіРѕ, Р°РєС‚РёРІРЅС‹С…, РІ Р°СЂС…РёРІРµ)
- РЎСЃС‹Р»РєРё РЅР° preview РїСЂРѕРµРєС‚РѕРІ
- РРЅС„РѕСЂРјР°С†РёСЏ Рѕ sandbox'Р°С…
- РљРЅРѕРїРєР° СЃРѕР·РґР°РЅРёСЏ РЅРѕРІРѕРіРѕ РїСЂРѕРµРєС‚Р°

## рџ”’ Р—Р°С‰РёС‚Р° СЂРѕСѓС‚РѕРІ

Р›РёС‡РЅС‹Р№ РєР°Р±РёРЅРµС‚ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё РїРµСЂРµРЅР°РїСЂР°РІР»СЏРµС‚ РЅРµР°РІС‚РѕСЂРёР·РѕРІР°РЅРЅС‹С… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№ РЅР° РіР»Р°РІРЅСѓСЋ СЃС‚СЂР°РЅРёС†Сѓ.

## рџЋЁ РЎС‚РёР»РёР·Р°С†РёСЏ

Р’СЃРµ РєРѕРјРїРѕРЅРµРЅС‚С‹ РёСЃРїРѕР»СЊР·СѓСЋС‚:
- Tailwind CSS
- Dark mode support
- РђРґР°РїС‚РёРІРЅС‹Р№ РґРёР·Р°Р№РЅ
- РђРЅРёРјР°С†РёРё Рё transitions

## рџ“ќ РСЃРїРѕР»СЊР·РѕРІР°РЅРёРµ РІ РєРѕРґРµ

### РџРѕР»СѓС‡РёС‚СЊ С‚РµРєСѓС‰РµРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ:

```tsx
import { useAuth } from '@/contexts/AuthContext';

function MyComponent() {
  const { user, loading, signOut } = useAuth();
  
  if (loading) return <div>Loading...</div>;
  
  if (!user) {
    return <div>РџРѕР¶Р°Р»СѓР№СЃС‚Р°, РІРѕР№РґРёС‚Рµ</div>;
  }
  
  return (
    <div>
      <p>РџСЂРёРІРµС‚, {user.email}!</p>
      <button onClick={signOut}>Р’С‹Р№С‚Рё</button>
    </div>
  );
}
```

### Р Р°Р±РѕС‚Р° СЃ РїСЂРѕРµРєС‚Р°РјРё:

```tsx
import { getUserProjects, createProject } from '@/lib/supabase-projects';

// РџРѕР»СѓС‡РёС‚СЊ РїСЂРѕРµРєС‚С‹ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
const projects = await getUserProjects({ status: 'active' });

// РЎРѕР·РґР°С‚СЊ РЅРѕРІС‹Р№ РїСЂРѕРµРєС‚
const newProject = await createProject({
  name: 'My Project',
  description: 'Project description',
  sandbox_id: 'sandbox-123'
});
```

## рџ”§ РќР°СЃС‚СЂРѕР№РєР°

### Email РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ

РџРѕ СѓРјРѕР»С‡Р°РЅРёСЋ Supabase С‚СЂРµР±СѓРµС‚ РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ email. Р§С‚РѕР±С‹ РѕС‚РєР»СЋС‡РёС‚СЊ:

1. РћС‚РєСЂРѕР№С‚Рµ [Supabase Dashboard](https://supabase.com/dashboard/project/lyuxhqhusukvpvwtkkum/auth/users)
2. РџРµСЂРµР№РґРёС‚Рµ РІ **Authentication в†’ Settings**
3. РћС‚РєР»СЋС‡РёС‚Рµ **Enable email confirmations**

### РљР°СЃС‚РѕРјРёР·Р°С†РёСЏ email С€Р°Р±Р»РѕРЅРѕРІ

1. РћС‚РєСЂРѕР№С‚Рµ **Authentication в†’ Email Templates**
2. РќР°СЃС‚СЂРѕР№С‚Рµ С€Р°Р±Р»РѕРЅС‹ РґР»СЏ:
   - РџРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ СЂРµРіРёСЃС‚СЂР°С†РёРё
   - РЎР±СЂРѕСЃ РїР°СЂРѕР»СЏ
   - РР·РјРµРЅРµРЅРёРµ email

## рџЋЇ РЎР»РµРґСѓСЋС‰РёРµ С€Р°РіРё

1. **Р—Р°РјРµРЅРёС‚Рµ С…РµРґРµСЂ** РІ `app/page.tsx` РЅР° `PageHeader` РєРѕРјРїРѕРЅРµРЅС‚
2. **РџСЂРёРјРµРЅРёС‚Рµ РјРёРіСЂР°С†РёСЋ** РёР· `supabase/migrations/001_initial_schema.sql`
3. **РќР°СЃС‚СЂРѕР№С‚Рµ email** РІ Supabase Dashboard
4. **РџСЂРѕС‚РµСЃС‚РёСЂСѓР№С‚Рµ** СЂРµРіРёСЃС‚СЂР°С†РёСЋ Рё РІС…РѕРґ

## рџђ› Troubleshooting

### РћС€РёР±РєР° "User already registered"
- РџРѕР»СЊР·РѕРІР°С‚РµР»СЊ СѓР¶Рµ СЃСѓС‰РµСЃС‚РІСѓРµС‚, РёСЃРїРѕР»СЊР·СѓР№С‚Рµ РІС…РѕРґ РІРјРµСЃС‚Рѕ СЂРµРіРёСЃС‚СЂР°С†РёРё

### РќРµ РїСЂРёС…РѕРґРёС‚ email РїРѕРґС‚РІРµСЂР¶РґРµРЅРёСЏ
- РџСЂРѕРІРµСЂСЊС‚Рµ РЅР°СЃС‚СЂРѕР№РєРё SMTP РІ Supabase
- РџСЂРѕРІРµСЂСЊС‚Рµ РїР°РїРєСѓ СЃРїР°Рј
- РћС‚РєР»СЋС‡РёС‚Рµ email РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ РґР»СЏ С‚РµСЃС‚РёСЂРѕРІР°РЅРёСЏ

### РќРµ СЂР°Р±РѕС‚Р°РµС‚ РІС…РѕРґ
- РЈР±РµРґРёС‚РµСЃСЊ, С‡С‚Рѕ РїРµСЂРµРјРµРЅРЅС‹Рµ РѕРєСЂСѓР¶РµРЅРёСЏ Supabase СѓСЃС‚Р°РЅРѕРІР»РµРЅС‹
- РџСЂРѕРІРµСЂСЊС‚Рµ РєРѕРЅСЃРѕР»СЊ Р±СЂР°СѓР·РµСЂР° РЅР° РѕС€РёР±РєРё
- РЈР±РµРґРёС‚РµСЃСЊ, С‡С‚Рѕ RLS РїРѕР»РёС‚РёРєРё РЅР°СЃС‚СЂРѕРµРЅС‹ РїСЂР°РІРёР»СЊРЅРѕ

## рџ“љ Р”РѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹Рµ СЂРµСЃСѓСЂСЃС‹

- [Supabase Auth Docs](https://supabase.com/docs/guides/auth)
- [Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)
- [Auth Helpers](https://supabase.com/docs/guides/auth/auth-helpers/nextjs)

---

**Р“РѕС‚РѕРІРѕ!** РЎРёСЃС‚РµРјР° Р°СѓС‚РµРЅС‚РёС„РёРєР°С†РёРё РїРѕР»РЅРѕСЃС‚СЊСЋ РЅР°СЃС‚СЂРѕРµРЅР° Рё РіРѕС‚РѕРІР° Рє РёСЃРїРѕР»СЊР·РѕРІР°РЅРёСЋ. рџЋ‰
